<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YuKyu Premium Dashboard</title>

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Noto+Sans+JP:wght@400;500;700&family=JetBrains+Mono:wght@400&display=swap"
        rel="stylesheet">

    <!-- Design System -->
    <link rel="stylesheet" href="/static/css/main.css">

    <!-- Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>

    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="logo">
                <span style="font-size: 2rem;">‚ú®</span>
                <div>
                    <div style="font-weight: 800; letter-spacing: -0.5px;">YUKYU</div>
                    <div style="font-size: 0.7rem; color: var(--primary); letter-spacing: 2px;">PREMIUM</div>
                </div>
            </div>

            <div class="nav-item active" data-view="dashboard" onclick="App.ui.switchView('dashboard')">
                <span>üìä</span> <span>Dashboard</span>
            </div>
            <div class="nav-item" data-view="employees" onclick="App.ui.switchView('employees')">
                <span>üë•</span> <span>Employees</span>
            </div>
            <div class="nav-item" data-view="factories" onclick="App.ui.switchView('factories')">
                <span>üè≠</span> <span>Factories</span>
            </div>
            <div class="nav-item" style="margin-top: auto;" onclick="App.ui.showToast('info', 'Settings coming soon')">
                <span>‚öôÔ∏è</span> <span>Settings</span>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">

            <!-- Header -->
            <header class="flex-between" style="margin-bottom: 2rem;">
                <div>
                    <h1 class="text-gradient" style="font-size: 2.5rem;" id="page-title">Dashboard Overview</h1>
                    <p style="color: #64748b;" id="page-subtitle">Real-time vacation data analytics</p>
                </div>

                <div class="flex-center" gap="1rem">
                    <div id="year-filter" class="flex-center" style="gap: 0.5rem; margin-right: 1.5rem;"></div>
                    <button class="btn btn-primary" onclick="App.data.sync()">
                        <span>‚ö°</span> Sync Data
                    </button>
                    <button class="btn btn-glass" onclick="App.data.syncGenzai()" title="Sync Dispatch">
                        <span>üè¢</span>
                    </button>
                    <button class="btn btn-glass" onclick="App.data.syncUkeoi()" title="Sync Contract">
                        <span>üîß</span>
                    </button>
                </div>
            </header>

            <!-- VIEW: DASHBOARD -->
            <div id="view-dashboard" class="view-section active">

                <!-- Bento Grid Stats -->
                <div class="bento-grid">
                    <div class="glass-panel stat-card col-span-1">
                        <div class="stat-label">Total Usage</div>
                        <div class="stat-value" id="kpi-used">-</div>
                        <div class="badge badge-success">Active</div>
                    </div>
                    <div class="glass-panel stat-card col-span-1">
                        <div class="stat-label">Remaining</div>
                        <div class="stat-value" id="kpi-balance" style="color: var(--warning);">-</div>
                    </div>
                    <div class="glass-panel stat-card col-span-1">
                        <div class="stat-label">Utilization</div>
                        <div class="stat-value" id="kpi-rate">-</div>
                    </div>
                    <div class="glass-panel stat-card col-span-1"
                        style="background: linear-gradient(135deg, rgba(56, 189, 248, 0.2), rgba(37, 99, 235, 0.2)); border: 1px solid var(--primary); cursor: pointer;"
                        onclick="App.ui.switchView('employees')">
                        <div class="stat-label">Employees</div>
                        <div class="stat-value" id="kpi-total">-</div>
                        <div style="font-size: 0.8rem; margin-top: 5px;">Click to view all ‚Üí</div>
                    </div>
                </div>

                <!-- Charts Row -->
                <div class="bento-grid">
                    <div class="glass-panel col-span-2" style="padding: 1.5rem; height: 400px;">
                        <h3 class="stat-label" style="margin-bottom: 1rem;">Usage Distribution</h3>
                        <div style="position: relative; height: 320px; width: 100%;">
                            <canvas id="chart-distribution"></canvas>
                        </div>
                    </div>
                    <div class="glass-panel col-span-2" style="padding: 1.5rem; height: 400px;">
                        <h3 class="stat-label" style="margin-bottom: 1rem;">Monthly Trends (2025)</h3>
                        <div style="position: relative; height: 320px; width: 100%;">
                            <canvas id="chart-trends"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW: EMPLOYEES -->
            <div id="view-employees" class="view-section" style="display: none;">
                <div class="glass-panel" style="padding: 2rem;">
                    <div class="flex-between" style="margin-bottom: 1.5rem;">
                        <div class="flex-center" style="gap: 1rem;">
                            <h3 style="font-size: 1.25rem;">Staff Directory</h3>
                            <div class="badge badge-warning" id="emp-count-badge">0 Employees</div>
                        </div>
                        <input type="text" id="search-input" placeholder="Search by name, ID, or factory..."
                            class="input-glass" style="width: 300px;" oninput="App.ui.handleSearch(this.value)">
                    </div>

                    <div style="overflow-x: auto; max-height: 70vh;">
                        <table class="modern-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Employee</th>
                                    <th>Factory</th>
                                    <th>Granted</th>
                                    <th>Used</th>
                                    <th>Balance</th>
                                    <th>Rate</th>
                                </tr>
                            </thead>
                            <tbody id="table-body">
                                <tr>
                                    <td colspan="7" style="text-align:center; padding: 2rem;">Loading data...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- VIEW: FACTORIES -->
            <div id="view-factories" class="view-section" style="display: none;">
                <div class="glass-panel" style="padding: 1.5rem; height: 600px;">
                    <h3 class="stat-label" style="margin-bottom: 1rem;">Usage by Factory</h3>
                    <div style="position: relative; height: 500px; width: 100%;">
                        <canvas id="chart-factories"></canvas>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- UI Elements -->
    <div class="loader-overlay" id="loader">
        <div class="spinner"></div>
        <div style="margin-top: 1rem; color: #94a3b8; font-weight: 600;">Processing Intelligence...</div>
    </div>

    <div class="toast-container" id="toast-container"></div>

    <!-- Simple Modal for Details -->
    <div class="loader-overlay" id="detail-modal" style="background: rgba(0,0,0,0.7);">
        <div class="glass-panel" style="width: 500px; max-width: 90%; position: relative;">
            <button class="btn"
                style="position: absolute; right: 10px; top: 10px; background: transparent; color: white;"
                onclick="App.ui.closeModal()">‚úï</button>
            <div style="padding: 2rem;">
                <h2 id="modal-title" style="margin-bottom: 1rem;">Employee Details</h2>
                <div id="modal-content"></div>
            </div>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
</body>

</html>