<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>YuKyu Premium Dashboard</title>

    <!-- PWA Meta Tags -->
    <meta name="description" content="ÊúâÁµ¶‰ºëÊöáÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É† - Premium Dashboard for managing paid leave">
    <meta name="theme-color" content="#38bdf8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="YuKyu">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="YuKyu Premium">
    <meta name="msapplication-TileColor" content="#020617">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="format-detection" content="telephone=no">

    <!-- PWA Manifest -->
    <link rel="manifest" href="/static/manifest.json">

    <!-- Icons -->
    <link rel="icon" type="image/svg+xml" href="/static/icons/icon.svg">
    <link rel="apple-touch-icon" href="/static/icons/icon.svg">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Noto+Sans+JP:wght@400;500;700&family=JetBrains+Mono:wght@400&display=swap"
        rel="stylesheet">

    <!-- Design System -->
    <link rel="stylesheet" href="/static/css/main.css">

    <!-- Libraries -->
    <!-- ApexCharts - Modern charting library -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.1/dist/apexcharts.min.js"></script>

    <!-- GSAP - Professional-grade animations -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollToPlugin.min.js"></script>

    <!-- Animate.css - Quick CSS animations -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
</head>

<body>

    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="logo">
                <span style="font-size: 2rem;">‚ú®</span>
                <div>
                    <div style="font-weight: 800; letter-spacing: -0.5px;">YUKYU</div>
                    <div style="font-size: 0.7rem; color: var(--primary); letter-spacing: 2px;">PREMIUM</div>
                </div>
            </div>

            <div class="nav-item active" data-view="dashboard" onclick="App.ui.switchView('dashboard')">
                <span>üìä</span> <span>Dashboard</span>
            </div>
            <div class="nav-item" data-view="employees" onclick="App.ui.switchView('employees')">
                <span>üë•</span> <span>Employees</span>
            </div>
            <div class="nav-item" data-view="factories" onclick="App.ui.switchView('factories')">
                <span>üè≠</span> <span>Factories</span>
            </div>
            <div class="nav-item" data-view="requests" onclick="App.ui.switchView('requests')">
                <span>üìù</span> <span>Áî≥Ë´ã</span>
            </div>
            <div class="nav-item" data-view="calendar" onclick="App.ui.switchView('calendar')">
                <span>üìÖ</span> <span>„Ç´„É¨„É≥„ÉÄ„Éº</span>
            </div>
            <div class="nav-item" data-view="compliance" onclick="App.ui.switchView('compliance')">
                <span>‚úÖ</span> <span>Compliance</span>
            </div>
            <div class="nav-item" data-view="analytics" onclick="App.ui.switchView('analytics')">
                <span>üìà</span> <span>ÂàÜÊûê</span>
            </div>
            <div class="nav-item" data-view="reports" onclick="App.ui.switchView('reports')">
                <span>üìã</span> <span>ÊúàÊ¨°„É¨„Éù„Éº„Éà</span>
            </div>
            <div class="nav-item" style="margin-top: auto;" onclick="App.ui.switchView('settings')">
                <span>‚öôÔ∏è</span> <span>Settings</span>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">

            <!-- Header -->
            <header class="flex-between" style="margin-bottom: 2rem;">
                <div>
                    <h1 class="text-gradient" style="font-size: 2.5rem;" id="page-title">Dashboard Overview</h1>
                    <p style="color: #64748b;" id="page-subtitle">Real-time vacation data analytics</p>
                </div>

                <div class="flex-center" style="gap: 1rem;">
                    <div id="year-filter" class="flex-center" style="gap: 0.5rem; margin-right: 1rem;"></div>

                    <!-- Theme Toggle -->
                    <div class="theme-toggle" onclick="App.theme.toggle()" title="„ÉÜ„Éº„ÉûÂàáÊõø">
                        <div class="theme-toggle-track">
                            <div class="theme-toggle-thumb">
                                <span id="theme-icon">üåô</span>
                            </div>
                        </div>
                        <span class="theme-toggle-label" id="theme-label">Dark</span>
                    </div>

                    <button class="btn btn-primary" onclick="App.data.sync()">
                        <span>‚ö°</span> Sync
                    </button>
                    <button class="btn btn-glass" onclick="App.data.syncGenzai()" title="Sync Dispatch">
                        <span>üè¢</span>
                    </button>
                    <button class="btn btn-glass" onclick="App.data.syncUkeoi()" title="Sync Contract">
                        <span>üîß</span>
                    </button>
                </div>
            </header>

            <!-- VIEW: DASHBOARD -->
            <div id="view-dashboard" class="view-section active">

                <!-- Bento Grid Stats -->
                <div class="bento-grid">
                    <div class="glass-panel stat-card col-span-1">
                        <div class="stat-label">Total Usage</div>
                        <div class="stat-value" id="kpi-used">-</div>
                        <div class="badge badge-success">Active</div>
                    </div>
                    <div class="glass-panel stat-card col-span-1">
                        <div class="stat-label">Remaining</div>
                        <div class="stat-value" id="kpi-balance" style="color: var(--warning);">-</div>
                    </div>
                    <div class="glass-panel stat-card col-span-1">
                        <div class="stat-label">Utilization</div>
                        <div class="stat-value" id="kpi-rate">-</div>
                    </div>
                    <div class="glass-panel stat-card col-span-1"
                        style="background: linear-gradient(135deg, rgba(56, 189, 248, 0.2), rgba(37, 99, 235, 0.2)); border: 1px solid var(--primary); cursor: pointer;"
                        onclick="App.ui.switchView('employees')">
                        <div class="stat-label">Employees</div>
                        <div class="stat-value" id="kpi-total">-</div>
                        <div style="font-size: 0.8rem; margin-top: 5px;">Click to view all ‚Üí</div>
                    </div>
                </div>

                <!-- Charts Row -->
                <div class="bento-grid">
                    <div class="glass-panel col-span-2" style="padding: 1.5rem; height: 400px;">
                        <h3 class="stat-label" style="margin-bottom: 1rem;">Usage Distribution</h3>
                        <div style="position: relative; height: 320px; width: 100%;">
                            <canvas id="chart-distribution"></canvas>
                        </div>
                    </div>
                    <div class="glass-panel col-span-2" style="padding: 1.5rem; height: 400px;">
                        <h3 class="stat-label" style="margin-bottom: 1rem;">Monthly Trends (2025)</h3>
                        <div style="position: relative; height: 320px; width: 100%;">
                            <canvas id="chart-trends"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW: EMPLOYEES -->
            <div id="view-employees" class="view-section" style="display: none;">
                <div class="glass-panel" style="padding: 2rem;">
                    <div class="flex-between" style="margin-bottom: 1.5rem;">
                        <div class="flex-center" style="gap: 1rem;">
                            <h3 style="font-size: 1.25rem;">Staff Directory</h3>
                            <div class="badge badge-warning" id="emp-count-badge">0 Employees</div>
                        </div>
                        <input type="text" id="search-input" placeholder="Search by name, ID, or factory..."
                            class="input-glass" style="width: 300px;" oninput="App.ui.handleSearch(this.value)">
                    </div>

                    <div style="overflow-x: auto; max-height: 70vh;">
                        <table class="modern-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Employee</th>
                                    <th>Factory</th>
                                    <th>Granted</th>
                                    <th>Used</th>
                                    <th>Balance</th>
                                    <th>Rate</th>
                                </tr>
                            </thead>
                            <tbody id="table-body">
                                <tr>
                                    <td colspan="7" style="text-align:center; padding: 2rem;">Loading data...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- VIEW: FACTORIES -->
            <div id="view-factories" class="view-section" style="display: none;">
                <div class="glass-panel" style="padding: 1.5rem; height: 600px;">
                    <h3 class="stat-label" style="margin-bottom: 1rem;">Usage by Factory</h3>
                    <div style="position: relative; height: 500px; width: 100%;">
                        <canvas id="chart-factories"></canvas>
                    </div>
                </div>
            </div>

            <!-- VIEW: REQUESTS (Áî≥Ë´ã) -->
            <div id="view-requests" class="view-section" style="display: none;">
                <div class="bento-grid">
                    <!-- New Request Form -->
                    <div class="glass-panel col-span-2" style="padding: 2rem;">
                        <h3 style="margin-bottom: 1.5rem; font-size: 1.25rem;">
                            üìù Êñ∞Ë¶èÊúâÁµ¶‰ºëÊöáÁî≥Ë´ã
                            <span style="font-size: 0.8rem; color: var(--muted); margin-left: 0.5rem;">New Leave Request</span>
                        </h3>

                        <div id="request-form">
                            <!-- Progress Steps -->
                            <div class="progress-steps">
                                <div class="progress-step active" id="step-1">
                                    <div class="progress-step-number">1</div>
                                    <div class="progress-step-label">ÂæìÊ•≠Âì°ÈÅ∏Êäû</div>
                                </div>
                                <div class="progress-step" id="step-2">
                                    <div class="progress-step-number">2</div>
                                    <div class="progress-step-label">Êó•Á®ã„ÉªÁ®ÆÈ°û</div>
                                </div>
                                <div class="progress-step" id="step-3">
                                    <div class="progress-step-number">3</div>
                                    <div class="progress-step-label">Á¢∫Ë™ç„ÉªÈÄÅ‰ø°</div>
                                </div>
                            </div>

                            <!-- SECTION 1: Employee Selection -->
                            <div class="form-section">
                                <div class="form-section-title">üë§ ÂæìÊ•≠Âì°„ÇíÈÅ∏Êäû</div>

                                <div class="form-group">
                                    <label>üè≠ Â∑•Â†¥„ÅßÁµûËæº„Åø (Filter by Factory)</label>
                                    <select id="factory-filter" class="input-glass" style="width: 100%;"
                                        onchange="App.requests.filterByFactory()">
                                        <option value="">„Åô„Åπ„Å¶„ÅÆÂ∑•Â†¥ (All Factories)</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label class="required">üîç ÂæìÊ•≠Âì°„ÇíÊ§úÁ¥¢ (Search Employee)</label>
                                    <input type="text" id="emp-search" class="input-glass" style="width: 100%;"
                                        placeholder="ÂêçÂâç„Åæ„Åü„ÅØÁ§æÂì°Áï™Âè∑„ÅßÊ§úÁ¥¢..." oninput="App.requests.searchEmployee(this.value)">
                                    <div id="emp-search-validation" class="validation-message"></div>
                                    <div id="emp-search-results" style="margin-top: 0.5rem; max-height: 200px; overflow-y: auto;"></div>
                                </div>
                            </div>

                            <!-- Selected Employee Info -->
                            <div id="selected-emp-info" style="display: none; margin-bottom: 1.25rem; padding: 1rem; background: rgba(56, 189, 248, 0.1); border-radius: 12px; border: 1px solid rgba(56, 189, 248, 0.2);">
                                <div class="flex-between">
                                    <div>
                                        <div id="selected-emp-name" style="font-weight: 600; font-size: 1.1rem;"></div>
                                        <div id="selected-emp-details" style="color: var(--muted); font-size: 0.85rem;"></div>
                                    </div>
                                    <div style="text-align: right;">
                                        <div class="stat-label">ÊÆã„ÇäÊó•Êï∞</div>
                                        <div id="selected-emp-balance" style="font-size: 1.5rem; font-weight: 700; color: var(--success);"></div>
                                    </div>
                                </div>
                                <!-- Hourly wage info (shown when available) -->
                                <div id="hourly-wage-info" style="display: none; margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid rgba(255,255,255,0.1);">
                                    <div class="flex-between">
                                        <div>
                                            <span class="stat-label">ÊôÇÁµ¶ (Hourly Wage):</span>
                                            <span id="selected-emp-wage" style="font-weight: 600; color: var(--primary); margin-left: 0.5rem;"></span>
                                        </div>
                                        <div>
                                            <span class="stat-label">ÊôÇÈñìÊÆãÈ´ò:</span>
                                            <span id="selected-emp-hours" style="font-weight: 600; color: var(--warning); margin-left: 0.5rem;"></span>
                                        </div>
                                    </div>
                                </div>
                                <!-- Usage History -->
                                <div id="usage-history-container" style="display: none; margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid rgba(255,255,255,0.1);">
                                    <div style="margin-bottom: 0.5rem;">
                                        <span class="stat-label">üìÖ ‰ΩøÁî®Â±•Ê≠¥ (Usage History)</span>
                                        <button type="button" onclick="App.requests.toggleUsageHistory()"
                                            style="margin-left: 0.5rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; background: rgba(255,255,255,0.1); border: none; border-radius: 4px; color: var(--muted); cursor: pointer;">
                                            Ë©≥Á¥∞„ÇíË°®Á§∫
                                        </button>
                                    </div>
                                    <div id="usage-history-summary" style="font-size: 0.85rem; color: var(--muted);"></div>
                                    <div id="usage-history-detail" style="display: none; margin-top: 0.5rem; max-height: 200px; overflow-y: auto;"></div>
                                </div>
                            </div>

                            <!-- SECTION 2: Date & Type -->
                            <div class="form-section">
                                <div class="form-section-title">üìÖ Êó•Á®ã„Å®Á®ÆÈ°û</div>

                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                    <div class="form-group">
                                        <label class="required">ÈñãÂßãÊó• (Start Date)</label>
                                        <input type="date" id="start-date" class="input-glass" style="width: 100%;"
                                            onchange="App.requests.validateDates()">
                                        <div id="start-date-validation" class="validation-message"></div>
                                    </div>
                                    <div class="form-group">
                                        <label class="required">ÁµÇ‰∫ÜÊó• (End Date)</label>
                                        <input type="date" id="end-date" class="input-glass" style="width: 100%;"
                                            onchange="App.requests.validateDates()">
                                        <div id="end-date-validation" class="validation-message"></div>
                                    </div>
                                </div>

                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                    <div class="form-group">
                                        <label class="required">Á®ÆÈ°û (Type)</label>
                                        <select id="leave-type" class="input-glass" style="width: 100%;" onchange="App.requests.toggleLeaveType()">
                                            <option value="full">ÂÖ®Êó•‰ºëÊöá (Full Day)</option>
                                            <option value="half_am">ÂçàÂâçÂçä‰ºë (AM Half)</option>
                                            <option value="half_pm">ÂçàÂæåÂçä‰ºë (PM Half)</option>
                                            <option value="hourly">ÊôÇÈñì‰ºë (Hourly)</option>
                                        </select>
                                    </div>
                                    <div class="form-group" id="days-input-container">
                                        <label class="required">Êó•Êï∞ (Days)</label>
                                        <input type="number" id="days-requested" class="input-glass" style="width: 100%;"
                                            min="0.5" step="0.5" value="1" oninput="App.requests.validateDays()">
                                        <div id="days-validation" class="validation-message"></div>
                                    </div>
                                    <div class="form-group" id="hours-input-container" style="display: none;">
                                        <label class="required">ÊôÇÈñìÊï∞ (Hours)</label>
                                        <input type="number" id="hours-requested" class="input-glass" style="width: 100%;"
                                            min="1" max="7" step="1" value="1" oninput="App.requests.updateCostEstimate(); App.requests.validateHours();">
                                        <div id="hours-validation" class="validation-message"></div>
                                        <div style="font-size: 0.75rem; color: var(--muted); margin-top: 0.25rem;">‚Äª 1Êó•ÊúÄÂ§ß7ÊôÇÈñì„Åæ„Åß</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Cost Estimate (shown for hourly leave) -->
                            <div id="cost-estimate-container" style="display: none; margin-bottom: 1.25rem; padding: 1rem; background: rgba(251, 191, 36, 0.1); border-radius: 8px; border: 1px solid rgba(251, 191, 36, 0.3);">
                                <div class="flex-between">
                                    <span class="stat-label">üí∞ Ë¶ãÁ©ç„Ç≥„Çπ„Éà (Estimated Cost):</span>
                                    <span id="cost-estimate" style="font-size: 1.25rem; font-weight: 700; color: var(--warning);"></span>
                                </div>
                            </div>

                            <!-- SECTION 3: Reason -->
                            <div class="form-section">
                                <div class="form-section-title">üìù ÁêÜÁî±</div>
                                <div class="form-group">
                                    <label>ÁêÜÁî± (Reason) - ‰ªªÊÑè</label>
                                    <textarea id="leave-reason" class="input-glass" style="width: 100%; min-height: 80px; resize: vertical;"
                                        placeholder="ÁßÅÁî®„ÄÅÈÄöÈô¢„ÄÅÊóÖË°å„Å™„Å©..." maxlength="200" oninput="App.requests.updateCharCounter()"></textarea>
                                    <div class="char-counter" id="reason-char-counter">0 / 200</div>
                                </div>
                            </div>

                            <!-- Submit Button -->
                            <button class="btn btn-primary" id="submit-btn" style="width: 100%; padding: 1rem;" onclick="App.requests.showConfirmation()">
                                ‚úì ÂÜÖÂÆπ„ÇíÁ¢∫Ë™ç„Åô„Çã (Review & Submit)
                            </button>
                        </div>
                    </div>

                    <!-- Pending Requests -->
                    <div class="glass-panel col-span-2" style="padding: 2rem;">
                        <div class="flex-between" style="margin-bottom: 1.5rem;">
                            <h3 style="font-size: 1.25rem;">
                                ‚è≥ ÊâøË™çÂæÖ„Å°
                                <span style="font-size: 0.8rem; color: var(--muted); margin-left: 0.5rem;">Pending Approvals</span>
                            </h3>
                            <button class="btn btn-glass" onclick="App.requests.loadPending()">
                                üîÑ Êõ¥Êñ∞
                            </button>
                        </div>

                        <div id="pending-requests" style="max-height: 400px; overflow-y: auto;">
                            <div style="text-align: center; color: var(--muted); padding: 2rem;">
                                Loading pending requests...
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Request History -->
                <div class="glass-panel" style="padding: 2rem; margin-top: 1.5rem;">
                    <h3 style="margin-bottom: 1.5rem; font-size: 1.25rem;">
                        üìã Áî≥Ë´ãÂ±•Ê≠¥
                        <span style="font-size: 0.8rem; color: var(--muted); margin-left: 0.5rem;">Request History</span>
                    </h3>
                    <div style="overflow-x: auto;">
                        <table class="modern-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>ÂæìÊ•≠Âì°</th>
                                    <th>ÊúüÈñì</th>
                                    <th>Êó•Êï∞</th>
                                    <th>ÁêÜÁî±</th>
                                    <th>„Çπ„ÉÜ„Éº„Çø„Çπ</th>
                                    <th>Áî≥Ë´ãÊó•</th>
                                </tr>
                            </thead>
                            <tbody id="requests-history">
                                <tr><td colspan="7" style="text-align: center; padding: 2rem;">Loading...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- VIEW: COMPLIANCE -->
            <div id="view-compliance" class="view-section" style="display: none;">
                <div class="bento-grid">
                    <!-- 5 Day Compliance -->
                    <div class="glass-panel col-span-2" style="padding: 2rem;">
                        <div class="flex-between" style="margin-bottom: 1.5rem;">
                            <h3 style="font-size: 1.25rem;">
                                üìä 5Êó•ÂèñÂæóÁæ©Âãô „ÉÅ„Çß„ÉÉ„ÇØ
                                <span style="font-size: 0.8rem; color: var(--muted); margin-left: 0.5rem;">5-Day Compliance Check</span>
                            </h3>
                            <button class="btn btn-primary" onclick="App.compliance.check5Day()">
                                üîç „ÉÅ„Çß„ÉÉ„ÇØÂÆüË°å
                            </button>
                        </div>

                        <div id="compliance-summary" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                            <div class="stat-card" style="text-align: center;">
                                <div class="stat-label">ÂØæË±°ËÄÖ</div>
                                <div class="stat-value" id="comp-total">-</div>
                            </div>
                            <div class="stat-card" style="text-align: center; border-color: var(--success);">
                                <div class="stat-label">ÈÅîÊàê</div>
                                <div class="stat-value" id="comp-compliant" style="color: var(--success);">-</div>
                            </div>
                            <div class="stat-card" style="text-align: center; border-color: var(--warning);">
                                <div class="stat-label">Ë¶ÅÊ≥®ÊÑè</div>
                                <div class="stat-value" id="comp-atrisk" style="color: var(--warning);">-</div>
                            </div>
                            <div class="stat-card" style="text-align: center; border-color: var(--danger);">
                                <div class="stat-label">Êú™ÈÅîÊàê</div>
                                <div class="stat-value" id="comp-noncompliant" style="color: var(--danger);">-</div>
                            </div>
                        </div>

                        <div id="compliance-list" style="max-height: 300px; overflow-y: auto;">
                            <div style="text-align: center; color: var(--muted); padding: 2rem;">
                                Click "„ÉÅ„Çß„ÉÉ„ÇØÂÆüË°å" to check compliance
                            </div>
                        </div>
                    </div>

                    <!-- Alerts -->
                    <div class="glass-panel col-span-2" style="padding: 2rem;">
                        <div class="flex-between" style="margin-bottom: 1.5rem;">
                            <h3 style="font-size: 1.25rem;">
                                üö® „Ç¢„É©„Éº„Éà
                                <span style="font-size: 0.8rem; color: var(--muted); margin-left: 0.5rem;">Compliance Alerts</span>
                            </h3>
                            <button class="btn btn-glass" onclick="App.compliance.loadAlerts()">
                                üîÑ Êõ¥Êñ∞
                            </button>
                        </div>

                        <div id="alerts-container" style="max-height: 400px; overflow-y: auto;">
                            <div style="text-align: center; color: var(--muted); padding: 2rem;">
                                Loading alerts...
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Annual Ledger -->
                <div class="glass-panel" style="padding: 2rem; margin-top: 1.5rem;">
                    <div class="flex-between" style="margin-bottom: 1.5rem;">
                        <h3 style="font-size: 1.25rem;">
                            üìí Âπ¥Ê¨°ÊúâÁµ¶‰ºëÊöáÁÆ°ÁêÜÁ∞ø
                            <span style="font-size: 0.8rem; color: var(--muted); margin-left: 0.5rem;">Annual Leave Ledger (Required by Law)</span>
                        </h3>
                        <div class="flex-center" style="gap: 0.5rem;">
                            <button class="btn btn-glass" onclick="App.compliance.loadLedger()">
                                üìÑ Ë°®Á§∫
                            </button>
                            <button class="btn btn-primary" onclick="App.compliance.exportLedger('csv')">
                                üíæ CSVÂá∫Âäõ
                            </button>
                        </div>
                    </div>

                    <div id="ledger-container" style="overflow-x: auto; max-height: 400px;">
                        <div style="text-align: center; color: var(--muted); padding: 2rem;">
                            Click "Ë°®Á§∫" to load the annual ledger
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW: CALENDAR -->
            <div id="view-calendar" class="view-section" style="display: none;">
                <div class="bento-grid">
                    <!-- Calendar Controls -->
                    <div class="glass-panel col-span-4" style="padding: 1.5rem;">
                        <div class="flex-between" style="margin-bottom: 1rem;">
                            <div class="flex-center" style="gap: 1rem;">
                                <button class="btn btn-glass" onclick="App.calendar.prevMonth()">‚óÄ</button>
                                <h3 id="calendar-month-title" style="font-size: 1.5rem; min-width: 200px; text-align: center;">2025Âπ¥ 12Êúà</h3>
                                <button class="btn btn-glass" onclick="App.calendar.nextMonth()">‚ñ∂</button>
                            </div>
                            <div class="flex-center" style="gap: 0.5rem;">
                                <button class="btn btn-glass" onclick="App.calendar.goToToday()">‰ªäÊó•</button>
                                <button class="btn btn-primary" onclick="App.calendar.loadEvents()">üîÑ Êõ¥Êñ∞</button>
                            </div>
                        </div>

                        <!-- Legend -->
                        <div class="flex-center" style="gap: 1.5rem; margin-bottom: 1rem; font-size: 0.85rem;">
                            <span><span style="display: inline-block; width: 12px; height: 12px; background: #38bdf8; border-radius: 2px; margin-right: 0.25rem;"></span>ÂÖ®Êó•‰ºëÊöá</span>
                            <span><span style="display: inline-block; width: 12px; height: 12px; background: #818cf8; border-radius: 2px; margin-right: 0.25rem;"></span>ÂçàÂâçÂçä‰ºë</span>
                            <span><span style="display: inline-block; width: 12px; height: 12px; background: #f472b6; border-radius: 2px; margin-right: 0.25rem;"></span>ÂçàÂæåÂçä‰ºë</span>
                            <span><span style="display: inline-block; width: 12px; height: 12px; background: #fbbf24; border-radius: 2px; margin-right: 0.25rem;"></span>ÊôÇÈñì‰ºë</span>
                            <span><span style="display: inline-block; width: 12px; height: 12px; background: #34d399; border-radius: 2px; margin-right: 0.25rem;"></span>‰ΩøÁî®Êó•</span>
                        </div>

                        <!-- Calendar Grid -->
                        <div id="calendar-grid" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px;">
                            <!-- Header -->
                            <div class="calendar-header">Êó•</div>
                            <div class="calendar-header">Êúà</div>
                            <div class="calendar-header">ÁÅ´</div>
                            <div class="calendar-header">Ê∞¥</div>
                            <div class="calendar-header">Êú®</div>
                            <div class="calendar-header">Èáë</div>
                            <div class="calendar-header">Âúü</div>
                            <!-- Days will be rendered by JS -->
                        </div>
                    </div>

                    <!-- Day Detail Panel -->
                    <div class="glass-panel col-span-2" style="padding: 1.5rem;">
                        <h3 style="margin-bottom: 1rem; font-size: 1.1rem;">
                            üìã ÈÅ∏ÊäûÊó•„ÅÆË©≥Á¥∞
                            <span id="selected-date-display" style="color: var(--primary); margin-left: 0.5rem;">-</span>
                        </h3>
                        <div id="day-detail-container" style="max-height: 300px; overflow-y: auto;">
                            <div style="text-align: center; color: var(--muted); padding: 2rem;">
                                Êó•‰ªò„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶Ë©≥Á¥∞„ÇíË°®Á§∫
                            </div>
                        </div>
                    </div>

                    <!-- Monthly Summary -->
                    <div class="glass-panel col-span-2" style="padding: 1.5rem;">
                        <h3 style="margin-bottom: 1rem; font-size: 1.1rem;">üìä ÊúàÈñì„Çµ„Éû„É™„Éº</h3>
                        <div id="monthly-summary-container">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                <div class="stat-card" style="text-align: center; padding: 1rem;">
                                    <div class="stat-label">‰ºëÊöáÂèñÂæóËÄÖÊï∞</div>
                                    <div class="stat-value" id="cal-month-employees" style="font-size: 2rem;">-</div>
                                </div>
                                <div class="stat-card" style="text-align: center; padding: 1rem;">
                                    <div class="stat-label">Á∑èÂèñÂæóÊó•Êï∞</div>
                                    <div class="stat-value" id="cal-month-days" style="font-size: 2rem;">-</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW: ANALYTICS -->
            <div id="view-analytics" class="view-section" style="display: none;">
                <div class="bento-grid">
                    <!-- Summary Cards -->
                    <div class="glass-panel stat-card col-span-1">
                        <div class="stat-label">Á∑èÂæìÊ•≠Âì°Êï∞</div>
                        <div class="stat-value" id="ana-total-emp">-</div>
                    </div>
                    <div class="glass-panel stat-card col-span-1">
                        <div class="stat-label">Á∑è‰ªò‰∏éÊó•Êï∞</div>
                        <div class="stat-value" id="ana-total-granted" style="color: var(--primary);">-</div>
                    </div>
                    <div class="glass-panel stat-card col-span-1">
                        <div class="stat-label">Á∑è‰ΩøÁî®Êó•Êï∞</div>
                        <div class="stat-value" id="ana-total-used" style="color: var(--success);">-</div>
                    </div>
                    <div class="glass-panel stat-card col-span-1">
                        <div class="stat-label">Âπ≥ÂùáÊ∂àÂåñÁéá</div>
                        <div class="stat-value" id="ana-avg-rate" style="color: var(--warning);">-</div>
                    </div>

                    <!-- Department Chart -->
                    <div class="glass-panel col-span-2" style="padding: 1.5rem; height: 400px;">
                        <h3 class="stat-label" style="margin-bottom: 1rem;">ÈÉ®ÈñÄÂà•‰ΩøÁî®Êó•Êï∞</h3>
                        <div style="position: relative; height: 320px; width: 100%;">
                            <canvas id="chart-department"></canvas>
                        </div>
                    </div>

                    <!-- Employee Type Chart -->
                    <div class="glass-panel col-span-2" style="padding: 1.5rem; height: 400px;">
                        <h3 class="stat-label" style="margin-bottom: 1rem;">ÂæìÊ•≠Âì°„Çø„Ç§„ÉóÂà•</h3>
                        <div style="position: relative; height: 320px; width: 100%;">
                            <canvas id="chart-emp-type"></canvas>
                        </div>
                    </div>

                    <!-- Top Users -->
                    <div class="glass-panel col-span-2" style="padding: 1.5rem;">
                        <h3 class="stat-label" style="margin-bottom: 1rem;">üèÜ Top 10 ‰ΩøÁî®ËÄÖ</h3>
                        <div id="top-users-list" style="max-height: 300px; overflow-y: auto;"></div>
                    </div>

                    <!-- High Balance -->
                    <div class="glass-panel col-span-2" style="padding: 1.5rem;">
                        <h3 class="stat-label" style="margin-bottom: 1rem;">‚ö†Ô∏è ÊÆãÊó•Êï∞„ÅåÂ§ö„ÅÑÂæìÊ•≠Âì°</h3>
                        <div id="high-balance-list" style="max-height: 300px; overflow-y: auto;"></div>
                    </div>

                    <!-- Predictions -->
                    <div class="glass-panel col-span-4" style="padding: 1.5rem;">
                        <div class="flex-between" style="margin-bottom: 1rem;">
                            <h3 class="stat-label">üìà Âπ¥Êú´‰∫àÊ∏¨„Éª5Êó•Áæ©ÂãôÈÅîÊàê„É™„Çπ„ÇØ</h3>
                            <button class="btn btn-glass" onclick="App.analytics.loadPredictions()">üîÑ Êõ¥Êñ∞</button>
                        </div>
                        <div id="predictions-container">
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1rem;">
                                <div class="stat-card" style="text-align: center; padding: 1rem;">
                                    <div class="stat-label">ÁèæÂú®Êúà</div>
                                    <div id="pred-current-month" style="font-size: 1.5rem; font-weight: 700;">-</div>
                                </div>
                                <div class="stat-card" style="text-align: center; padding: 1rem;">
                                    <div class="stat-label">ÊÆã„ÇäÊúàÊï∞</div>
                                    <div id="pred-remaining-months" style="font-size: 1.5rem; font-weight: 700;">-</div>
                                </div>
                                <div class="stat-card" style="text-align: center; padding: 1rem;">
                                    <div class="stat-label">ÊúàÂπ≥Âùá‰ΩøÁî®</div>
                                    <div id="pred-avg-monthly" style="font-size: 1.5rem; font-weight: 700;">-</div>
                                </div>
                                <div class="stat-card" style="text-align: center; padding: 1rem; border-color: var(--danger);">
                                    <div class="stat-label">5Êó•Êú™ÈÅîÊàê„É™„Çπ„ÇØ</div>
                                    <div id="pred-at-risk" style="font-size: 1.5rem; font-weight: 700; color: var(--danger);">-</div>
                                </div>
                            </div>
                            <div id="at-risk-employees" style="max-height: 200px; overflow-y: auto;"></div>
                        </div>
                    </div>
                </div>

                <!-- Export Section -->
                <div class="glass-panel" style="padding: 1.5rem; margin-top: 1.5rem;">
                    <h3 class="stat-label" style="margin-bottom: 1rem;">üì• „Éá„Éº„Çø„Ç®„ÇØ„Çπ„Éù„Éº„Éà</h3>
                    <div class="flex-center" style="gap: 1rem; flex-wrap: wrap;">
                        <button class="btn btn-primary" onclick="App.analytics.exportExcel('employees')">
                            üìä ÂæìÊ•≠Âì°„Éá„Éº„Çø (Excel)
                        </button>
                        <button class="btn btn-glass" onclick="App.analytics.exportExcel('requests')">
                            üìù Áî≥Ë´ã‰∏ÄË¶ß (Excel)
                        </button>
                        <button class="btn btn-glass" onclick="App.analytics.exportExcel('compliance')">
                            ‚úÖ ÁÆ°ÁêÜÁ∞ø (Excel)
                        </button>
                    </div>
                </div>
            </div>

            <!-- VIEW: MONTHLY REPORTS -->
            <div id="view-reports" class="view-section" style="display: none;">
                <div class="bento-grid">
                    <!-- Date Selector with Tabs -->
                    <div class="glass-panel col-span-4" style="padding: 1.5rem;">
                        <div class="flex-between" style="margin-bottom: 1.25rem; flex-wrap: wrap; gap: 1rem;">
                            <h3 style="font-size: 1.25rem;">üìã „É¨„Éù„Éº„ÉàÊúüÈñì</h3>
                            <button class="btn btn-export" onclick="App.reports.exportReport()">
                                üì• ExcelÂá∫Âäõ
                            </button>
                        </div>

                        <!-- Tab Selector -->
                        <div class="tab-container" style="margin-bottom: 1.25rem;">
                            <button class="tab-btn active" id="tab-monthly" onclick="App.reports.setMode('monthly')">
                                üìÖ ÊúàÊ¨° (21Êó•„Äú20Êó•)
                            </button>
                            <button class="tab-btn" id="tab-custom" onclick="App.reports.setMode('custom')">
                                üîß ÊúüÈñìÊåáÂÆö
                            </button>
                        </div>

                        <!-- Monthly Mode -->
                        <div id="monthly-selector" style="display: flex; gap: 1rem; align-items: center; margin-bottom: 1rem; flex-wrap: wrap;">
                            <select id="report-year" class="input-glass" style="width: 120px;" onchange="App.reports.loadMonthList()">
                            </select>
                            <select id="report-month" class="input-glass" style="width: 120px;" onchange="App.reports.loadReport()">
                                <option value="1">1ÊúàÂ∫¶</option>
                                <option value="2">2ÊúàÂ∫¶</option>
                                <option value="3">3ÊúàÂ∫¶</option>
                                <option value="4">4ÊúàÂ∫¶</option>
                                <option value="5">5ÊúàÂ∫¶</option>
                                <option value="6">6ÊúàÂ∫¶</option>
                                <option value="7">7ÊúàÂ∫¶</option>
                                <option value="8">8ÊúàÂ∫¶</option>
                                <option value="9">9ÊúàÂ∫¶</option>
                                <option value="10">10ÊúàÂ∫¶</option>
                                <option value="11">11ÊúàÂ∫¶</option>
                                <option value="12">12ÊúàÂ∫¶</option>
                            </select>
                            <button class="btn btn-primary" onclick="App.reports.loadReport()">üîç Ë°®Á§∫</button>
                        </div>

                        <!-- Custom Mode -->
                        <div id="custom-selector" style="display: none; margin-bottom: 1rem;">
                            <div style="display: flex; gap: 1rem; align-items: flex-end; flex-wrap: wrap;">
                                <div>
                                    <label class="stat-label" style="display: block; margin-bottom: 0.25rem; font-size: 0.8rem;">ÈñãÂßãÊó•</label>
                                    <input type="date" id="report-start-date" class="input-glass" style="width: 160px;">
                                </div>
                                <div style="padding-bottom: 0.75rem;">
                                    <span style="font-size: 1.25rem; color: var(--text-muted);">„Äú</span>
                                </div>
                                <div>
                                    <label class="stat-label" style="display: block; margin-bottom: 0.25rem; font-size: 0.8rem;">ÁµÇ‰∫ÜÊó•</label>
                                    <input type="date" id="report-end-date" class="input-glass" style="width: 160px;">
                                </div>
                                <button class="btn btn-primary" onclick="App.reports.loadCustomReport()">üîç Ë°®Á§∫</button>
                            </div>
                            <div style="margin-top: 0.75rem; font-size: 0.85rem; color: var(--text-muted);">
                                ‚Äª Ë§áÊï∞Êúà„Å´„Åæ„Åü„Åå„ÇãÊúüÈñì„ÇÇOKÔºà‰æã: 1/16 „Äú 2/20Ôºâ
                            </div>
                        </div>

                        <!-- Period Display -->
                        <div id="report-period-display" style="text-align: center; padding: 1rem; background: rgba(56, 189, 248, 0.1); border-radius: 8px;">
                            <span style="font-size: 1.25rem; font-weight: 600;" id="report-period-label">-</span>
                        </div>
                    </div>

                    <!-- Summary Cards -->
                    <div class="glass-panel stat-card col-span-1">
                        <div class="stat-label">ÂèñÂæóËÄÖÊï∞</div>
                        <div class="stat-value" id="rpt-emp-count">-</div>
                    </div>
                    <div class="glass-panel stat-card col-span-1">
                        <div class="stat-label">Á∑èÂèñÂæóÊó•Êï∞</div>
                        <div class="stat-value" id="rpt-total-days" style="color: var(--primary);">-</div>
                    </div>
                    <div class="glass-panel stat-card col-span-1">
                        <div class="stat-label">Á∑èÂèñÂæóÊôÇÈñì</div>
                        <div class="stat-value" id="rpt-total-hours" style="color: var(--warning);">-</div>
                    </div>
                    <div class="glass-panel stat-card col-span-1">
                        <div class="stat-label">1‰∫∫Âπ≥Âùá</div>
                        <div class="stat-value" id="rpt-avg-days" style="color: var(--success);">-</div>
                    </div>

                    <!-- Employee List -->
                    <div class="glass-panel col-span-2" style="padding: 1.5rem;">
                        <h3 class="stat-label" style="margin-bottom: 1rem;">üë• ÂèñÂæóËÄÖ‰∏ÄË¶ß</h3>
                        <div id="report-employee-list" style="max-height: 400px; overflow-y: auto;">
                            <div style="text-align: center; color: var(--muted); padding: 2rem;">
                                Êúà„ÇíÈÅ∏Êäû„Åó„Å¶„É¨„Éù„Éº„Éà„ÇíË°®Á§∫
                            </div>
                        </div>
                    </div>

                    <!-- Factory Summary -->
                    <div class="glass-panel col-span-2" style="padding: 1.5rem;">
                        <h3 class="stat-label" style="margin-bottom: 1rem;">üè≠ Ê¥æÈÅ£ÂÖàÂà•ÈõÜË®à</h3>
                        <div id="report-factory-list" style="max-height: 400px; overflow-y: auto;">
                            <div style="text-align: center; color: var(--muted); padding: 2rem;">
                                Êúà„ÇíÈÅ∏Êäû„Åó„Å¶„É¨„Éù„Éº„Éà„ÇíË°®Á§∫
                            </div>
                        </div>
                    </div>

                    <!-- Daily Breakdown -->
                    <div class="glass-panel col-span-4" style="padding: 1.5rem;">
                        <h3 class="stat-label" style="margin-bottom: 1rem;">üìÖ Êó•Âà•ÂèñÂæóÁä∂Ê≥Å</h3>
                        <div id="report-daily-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 0.5rem; max-height: 300px; overflow-y: auto;">
                            <div style="text-align: center; color: var(--muted); padding: 2rem; grid-column: 1 / -1;">
                                Êúà„ÇíÈÅ∏Êäû„Åó„Å¶„É¨„Éù„Éº„Éà„ÇíË°®Á§∫
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Year Overview -->
                <div class="glass-panel" style="padding: 1.5rem; margin-top: 1.5rem;">
                    <h3 class="stat-label" style="margin-bottom: 1rem;">üìä Âπ¥ÈñìÊúàÂà•„Çµ„Éû„É™„Éº</h3>
                    <div style="overflow-x: auto;">
                        <table class="modern-table">
                            <thead>
                                <tr>
                                    <th>ÊúàÂ∫¶</th>
                                    <th>ÊúüÈñì</th>
                                    <th>ÂèñÂæóËÄÖÊï∞</th>
                                    <th>Á∑èÊó•Êï∞</th>
                                    <th>Ë©≥Á¥∞</th>
                                </tr>
                            </thead>
                            <tbody id="report-year-summary">
                                <tr><td colspan="5" style="text-align: center; padding: 2rem;">Loading...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- VIEW: SETTINGS -->
            <div id="view-settings" class="view-section" style="display: none;">
                <div class="glass-panel" style="padding: 2rem;">
                    <h3 style="margin-bottom: 1.5rem; font-size: 1.25rem;">‚öôÔ∏è „Ç∑„Çπ„ÉÜ„É†Ë®≠ÂÆö</h3>

                    <div style="display: grid; gap: 2rem;">
                        <!-- System Status -->
                        <div>
                            <h4 class="stat-label" style="margin-bottom: 1rem;">„Ç∑„Çπ„ÉÜ„É†Áä∂ÊÖã</h4>
                            <div id="system-status" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                                <div class="stat-card" style="text-align: center;">
                                    <div class="stat-label">Database Size</div>
                                    <div class="stat-value" id="sys-db-size">-</div>
                                </div>
                                <div class="stat-card" style="text-align: center;">
                                    <div class="stat-label">Total Employees</div>
                                    <div class="stat-value" id="sys-emp-count">-</div>
                                </div>
                                <div class="stat-card" style="text-align: center;">
                                    <div class="stat-label">Health Status</div>
                                    <div class="stat-value" id="sys-health" style="color: var(--success);">-</div>
                                </div>
                            </div>
                        </div>

                        <!-- Data Management -->
                        <div>
                            <h4 class="stat-label" style="margin-bottom: 1rem;">„Éá„Éº„ÇøÁÆ°ÁêÜ</h4>
                            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <button class="btn btn-glass" onclick="App.settings.loadSnapshot()">
                                    üìä SnapshotÊõ¥Êñ∞
                                </button>
                                <button class="btn btn-glass" onclick="App.settings.viewAuditLog()">
                                    üìú Áõ£Êüª„É≠„Ç∞
                                </button>
                                <button class="btn btn-glass" onclick="App.data.sync()" style="background: rgba(56, 189, 248, 0.2);">
                                    ‚ö° „Éá„Éº„ÇøÂêåÊúü
                                </button>
                            </div>
                        </div>

                        <!-- API Info -->
                        <div>
                            <h4 class="stat-label" style="margin-bottom: 1rem;">APIÊÉÖÂ†±</h4>
                            <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem;">
                                <div style="color: var(--muted);">Base URL:</div>
                                <div style="color: var(--primary);">http://localhost:8000/api</div>
                                <div style="color: var(--muted); margin-top: 0.5rem;">Documentation:</div>
                                <div><a href="/docs" target="_blank" style="color: var(--primary);">http://localhost:8000/docs</a></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- UI Elements -->
    <div class="loader-overlay" id="loader">
        <div class="spinner"></div>
        <div style="margin-top: 1rem; color: #94a3b8; font-weight: 600;">Processing Intelligence...</div>
    </div>

    <div class="toast-container" id="toast-container"></div>

    <!-- Simple Modal for Details -->
    <div class="loader-overlay" id="detail-modal" style="background: rgba(0,0,0,0.7);">
        <div class="glass-panel" style="width: 500px; max-width: 90%; position: relative;">
            <button class="btn"
                style="position: absolute; right: 10px; top: 10px; background: transparent; color: white;"
                onclick="App.ui.closeModal()">‚úï</button>
            <div style="padding: 2rem;">
                <h2 id="modal-title" style="margin-bottom: 1rem;">Employee Details</h2>
                <div id="modal-content"></div>
            </div>
        </div>
    </div>

    <script src="/static/js/app.js"></script>

    <!-- PWA Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/static/sw.js')
                    .then(registration => {
                        console.log('SW registered:', registration.scope);
                    })
                    .catch(error => {
                        console.log('SW registration failed:', error);
                    });
            });
        }

        // PWA Install Prompt
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            // Optional: Show custom install button
            console.log('PWA install available');
        });
    </script>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="confirm-modal" onclick="if(event.target === this) App.requests.hideConfirmation()">
        <div class="confirm-modal-content">
            <div class="confirm-modal-title">
                ‚úÖ Áî≥Ë´ãÂÜÖÂÆπ„ÅÆÁ¢∫Ë™ç
            </div>

            <div class="confirm-summary">
                <div class="confirm-row">
                    <span class="confirm-row-label">ÂæìÊ•≠Âì°</span>
                    <span class="confirm-row-value" id="confirm-employee">-</span>
                </div>
                <div class="confirm-row">
                    <span class="confirm-row-label">Â∑•Â†¥</span>
                    <span class="confirm-row-value" id="confirm-factory">-</span>
                </div>
                <div class="confirm-row">
                    <span class="confirm-row-label">ÊúüÈñì</span>
                    <span class="confirm-row-value" id="confirm-dates">-</span>
                </div>
                <div class="confirm-row">
                    <span class="confirm-row-label">Á®ÆÈ°û</span>
                    <span class="confirm-row-value" id="confirm-type">-</span>
                </div>
                <div class="confirm-row">
                    <span class="confirm-row-label">Êó•Êï∞/ÊôÇÈñì</span>
                    <span class="confirm-row-value highlight" id="confirm-amount">-</span>
                </div>
                <div class="confirm-row" id="confirm-cost-row" style="display: none;">
                    <span class="confirm-row-label">Ë¶ãÁ©ç„Ç≥„Çπ„Éà</span>
                    <span class="confirm-row-value" style="color: var(--warning);" id="confirm-cost">-</span>
                </div>
                <div class="confirm-row">
                    <span class="confirm-row-label">ÊÆã„ÇäÊó•Êï∞</span>
                    <span class="confirm-row-value" id="confirm-balance">-</span>
                </div>
                <div class="confirm-row" id="confirm-reason-row">
                    <span class="confirm-row-label">ÁêÜÁî±</span>
                    <span class="confirm-row-value" id="confirm-reason" style="max-width: 200px; text-align: right;">-</span>
                </div>
            </div>

            <div style="padding: 0.75rem; background: rgba(251, 191, 36, 0.1); border-radius: 8px; margin-bottom: 1rem; font-size: 0.85rem; color: var(--warning);">
                ‚ö†Ô∏è „Åì„ÅÆÂÜÖÂÆπ„ÅßÁî≥Ë´ã„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÅãÔºü
            </div>

            <div class="confirm-actions">
                <button class="btn btn-glass" onclick="App.requests.hideConfirmation()">
                    ‚Üê Êàª„Çã
                </button>
                <button class="btn btn-primary" id="confirm-submit-btn" onclick="App.requests.submitConfirmed()">
                    üì§ Áî≥Ë´ã„Åô„Çã
                </button>
            </div>
        </div>
    </div>
</body>

</html>