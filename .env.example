# YuKyuDATA Security Configuration
# Copy this file to .env and fill in the values

# ============================================
# ENVIRONMENT
# ============================================
DEBUG=false
TESTING=false
ENVIRONMENT=production

# ============================================
# JWT & AUTHENTICATION
# ============================================
# CRITICAL: Generate a strong secret key before deployment!
# Run: python -c "import secrets; print(secrets.token_urlsafe(32))"
# WARNING: Application will refuse to start if this value is not changed!
JWT_SECRET_KEY=CHANGE_ME_GENERATE_WITH_python_secrets_token_urlsafe_32
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
JWT_REFRESH_EXPIRATION_DAYS=30

# ============================================
# DATABASE - SQLite (Default/Development)
# ============================================
DATABASE_TYPE=sqlite
DATABASE_URL=sqlite:///./yukyu.db

# ============================================
# DATABASE ADAPTER - ORM Migration (Phase 2)
# ============================================
# Feature flag to switch between raw SQL and SQLAlchemy ORM
# false = Use raw SQL (database.py) - PRODUCTION DEFAULT
# true = Use SQLAlchemy ORM (database_orm.py) - Development/Testing
# See services/database_adapter.py for implementation details
USE_ORM=false

# ============================================
# DATABASE - PostgreSQL (Production/FASE 3)
# ============================================
# Uncomment and configure for PostgreSQL migration
# DATABASE_TYPE=postgresql
# DATABASE_URL=postgresql+psycopg2://yukyu_user:password@localhost:5432/yukyu
# For Docker: postgresql+psycopg2://yukyu_user:password@postgres-primary:5432/yukyu

# PostgreSQL Connection Pool Configuration
DB_POOL_SIZE=10                 # Minimum connections in pool
DB_MAX_OVERFLOW=20              # Maximum overflow connections
DB_POOL_TIMEOUT=30              # Connection timeout in seconds
DB_POOL_RECYCLE=3600            # Recycle connections after 1 hour

# PostgreSQL Read Replica (for analytics)
# DATABASE_REPLICA_URL=postgresql+psycopg2://yukyu_user:password@postgres-replica:5432/yukyu
# REPLICA_ENABLED=false

# Database encryption key (32 bytes in hex)
# CRITICAL: Generate before deployment!
# Run: python -c "import secrets; print(secrets.token_hex(32))"
DATABASE_ENCRYPTION_KEY=CHANGE_ME_RUN_python_secrets_token_hex_32

# ============================================
# BACKUP & PITR (Point-in-Time Recovery)
# ============================================
BACKUP_ENABLED=false
BACKUP_INTERVAL=3600            # Hourly backups (seconds)
BACKUP_RETENTION_DAYS=7         # Keep 7 days of backups
BACKUP_COMPRESSION=gzip         # gzip or none
BACKUP_DIRECTORY=./backups
WAL_ARCHIVING_ENABLED=false     # Enable WAL archiving for PITR

# ============================================
# API SECURITY
# ============================================
API_KEY=your-api-key-here
API_KEY_ROTATION_DAYS=90

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60

# ============================================
# CORS
# ============================================
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# ============================================
# SSL/TLS
# ============================================
SSL_ENABLED=false
# SSL_CERT_FILE=/etc/ssl/certs/yukyu.crt
# SSL_KEYFILE=/etc/ssl/private/yukyu.key

# ============================================
# ENCRYPTION
# ============================================
# AES-256 key (64 hex chars = 32 bytes)
# CRITICAL: Generate before deployment!
# Run: python -c "import secrets; print(secrets.token_hex(32))"
ENCRYPTION_KEY=CHANGE_ME_RUN_python_secrets_token_hex_32_FOR_AES256

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# ============================================
# MONITORING & OBSERVABILITY
# ============================================
SENTRY_DSN=
ELASTICSEARCH_ENABLED=false
ELASTICSEARCH_HOST=localhost:9200
ELASTICSEARCH_USER=elastic
ELASTICSEARCH_PASSWORD=

# ============================================
# REDIS CACHE
# ============================================
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=

# ============================================
# MFA (Multi-Factor Authentication)
# ============================================
MFA_ENABLED=false
MFA_ISSUER=YuKyuDATA
TOTP_WINDOW_SIZE=1

# ============================================
# SECRETS MANAGER (AWS or HashiCorp Vault)
# ============================================
# AWS Secrets Manager
AWS_SECRETS_MANAGER_ENABLED=false
AWS_REGION=ap-northeast-1
AWS_SECRETS_PREFIX=yukyu

# HashiCorp Vault
VAULT_ENABLED=false
# VAULT_ADDR=https://vault.example.com
# VAULT_TOKEN=hvs.xxxxxx
VAULT_PATH=secret/data/yukyu

# ============================================
# COMPLIANCE & DATA RETENTION
# ============================================
GDPR_ENABLED=true
GDPR_DATA_RETENTION_DAYS=32850
GDPR_AUDIT_RETENTION_DAYS=1095

LGPD_ENABLED=true
PII_ENCRYPTION_REQUIRED=true

# ============================================
# GITHUB INTEGRATION
# ============================================
# Personal Access Token para GitHub API
# Generar en: https://github.com/settings/tokens
# Permisos necesarios: repo (para repos privados) o public_repo (para publicos)
GITHUB_TOKEN=ghp_your_token_here

# Repositorio en formato owner/repo
GITHUB_REPO=jokken79/YuKyuDATA-app1.0v

# ============================================
# EMAIL NOTIFICATIONS (SMTP)
# ============================================
# Enable email notifications
EMAIL_NOTIFICATIONS_ENABLED=false

# SMTP Server Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@yukyu.app
SMTP_FROM_NAME=YuKyuDATA システム

# For Gmail: Enable "Less secure app access" or use App Password
# For Office 365: Use smtp.office365.com:587
# For Amazon SES: Use email-smtp.{region}.amazonaws.com:587

# ============================================
# SLACK NOTIFICATIONS
# ============================================
# Enable Slack notifications
SLACK_NOTIFICATIONS_ENABLED=false

# Slack Webhook URL (create at https://api.slack.com/apps)
SLACK_WEBHOOK_URL=
SLACK_CHANNEL=#yukyu-notifications

# ============================================
# NOTIFICATION PREFERENCES
# ============================================
# Enable/disable specific notification types
NOTIFY_LEAVE_CREATED=true
NOTIFY_LEAVE_APPROVED=true
NOTIFY_LEAVE_REJECTED=true
NOTIFY_EXPIRING_DAYS=true
NOTIFY_COMPLIANCE_WARNING=true

# Manager email addresses (comma-separated)
# These emails receive notifications for new leave requests and compliance warnings
MANAGER_EMAILS=manager1@company.com,manager2@company.com
